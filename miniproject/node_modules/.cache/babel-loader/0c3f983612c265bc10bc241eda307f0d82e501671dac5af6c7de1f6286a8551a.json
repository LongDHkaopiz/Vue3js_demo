{"ast":null,"code":"import { API_NEWS, API_NEWS_KEY } from '../common/contants';\nimport dashboard from './Sidebar.vue';\nexport default {\n  name: 'admin.news',\n  components: {\n    dashboard\n  },\n  data() {\n    return {\n      news: [],\n      search: '',\n      date_from: '',\n      date_to: '',\n      new_date_from: '',\n      new_date_to: '',\n      page: '',\n      sort_by: 'relevancy',\n      currentPage: 1,\n      totalPages: '',\n      rules: []\n    };\n  },\n  methods: {\n    async getAllNews() {\n      this.new_date_from = this.convertDateTime(this.date_from);\n      this.new_date_to = this.convertDateTime(this.date_to);\n      const url = API_NEWS + `search?q=${this.search}&from=${this.new_date_from}&to=${this.new_date_to}&lang=en&topic=all&sort_by=${this.sort_by}&page_size=9&page=${this.currentPage}`;\n      const options = {\n        method: 'GET',\n        headers: {\n          'x-api-key': API_NEWS_KEY\n        }\n      };\n      try {\n        const response = await fetch(url, options);\n        const rest = await response.json();\n        this.news = rest.articles;\n        this.totalPages = Math.ceil(rest.total_pages / 9);\n      } catch (error) {\n        console.error(error);\n      }\n      console.log(this.currentPage);\n    },\n    convertDateTime(value) {\n      let dateObj = new Date(value);\n      let year = dateObj.getFullYear();\n      let month = (\"0\" + (dateObj.getMonth() + 1)).slice(-2);\n      let day = (\"0\" + dateObj.getDate()).slice(-2);\n      let formattedDate = `${year}/${month}/${day}`;\n      return formattedDate;\n    },\n    handlePaginationChange(newPage) {\n      this.currentPage = newPage;\n      this.getAllNews();\n    }\n  },\n  created() {\n    const rules = reactive < FormRules < RuleForm >> {\n      name: [{\n        required: true,\n        message: 'Please input Activity name',\n        trigger: 'blur'\n      }, {\n        min: 3,\n        max: 5,\n        message: 'Length should be 3 to 5',\n        trigger: 'blur'\n      }],\n      region: [{\n        required: true,\n        message: 'Please select Activity zone',\n        trigger: 'change'\n      }],\n      count: [{\n        required: true,\n        message: 'Please select Activity count',\n        trigger: 'change'\n      }],\n      date1: [{\n        type: 'date',\n        required: true,\n        message: 'Please pick a date',\n        trigger: 'change'\n      }],\n      date2: [{\n        type: 'date',\n        required: true,\n        message: 'Please pick a time',\n        trigger: 'change'\n      }],\n      type: [{\n        type: 'array',\n        required: true,\n        message: 'Please select at least one activity type',\n        trigger: 'change'\n      }],\n      resource: [{\n        required: true,\n        message: 'Please select activity resource',\n        trigger: 'change'\n      }],\n      desc: [{\n        required: true,\n        message: 'Please input activity form',\n        trigger: 'blur'\n      }]\n    };\n  }\n};","map":{"version":3,"names":["API_NEWS","API_NEWS_KEY","dashboard","name","components","data","news","search","date_from","date_to","new_date_from","new_date_to","page","sort_by","currentPage","totalPages","rules","methods","getAllNews","convertDateTime","url","options","method","headers","response","fetch","rest","json","articles","Math","ceil","total_pages","error","console","log","value","dateObj","Date","year","getFullYear","month","getMonth","slice","day","getDate","formattedDate","handlePaginationChange","newPage","created","reactive","FormRules","RuleForm","required","message","trigger","min","max","region","count","date1","type","date2","resource","desc"],"sources":["/home/longdh@kaopiz.local/Music/vueMiniProject/miniproject/src/views/admin/authors/News.vue"],"sourcesContent":["<template>\n    <div class=\"d-flex\">\n        <dashboard></dashboard>\n        <div class=\"container\" style=\"position: relative;\">\n            <el-form :model=\"form\" label-width=\"120px\" :rules=\"rules\">\n                <el-form-item label=\"Search By\" required>\n                    <el-input v-model=\"search\" />\n                </el-form-item>\n\n                <el-form-item label=\"Activity time\" required>\n                    <el-col :span=\"11\">\n                        <el-date-picker type=\"date\" placeholder=\"From date\" style=\"width: 100%\" v-model=\"date_from\" />\n                    </el-col>\n                    <el-col :span=\"2\" class=\"text-center\">\n                        <span class=\"text-gray-500\">-</span>\n                    </el-col>\n                    <el-col :span=\"11\">\n                        <el-date-picker placeholder=\"To date\" style=\"width: 100%\" v-model=\"date_to\" />\n                    </el-col>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"getAllNews\">Search</el-button>\n                </el-form-item>\n            </el-form>\n            <el-form-item label=\"Sort By\" style=\"right: 2%;position: absolute; width: 160px;\" id=\"select-option\">\n                <el-select v-model=\"sort_by\" filterable placeholder=\"Sort\" @change=\"getAllNews\">\n                    <el-option label=\"Default\" value=\"relevancy\"></el-option>\n                    <el-option label=\"Date\" value=\"date\"></el-option>\n                    <el-option label=\"Rank\" value=\"rank\"></el-option>\n                    <!-- Thêm các tùy chọn khác tại đây -->\n                </el-select>\n            </el-form-item>\n\n            <div class=\"main-content\" style=\"padding-top: 20px;\">\n\n                <div class=\"row\" :key=\"index\" v-for=\"(item, index) in news\" style=\"position: relative;\">\n                    <div class=\"news-item\">\n                        <div class=\"image\">\n                            <img :src=\"item.media\" :alt=\"item.excerpt\">\n                        </div>\n                        <div class=\"item-content\">\n                            <h3 class=\"title\"><a :href=\"item.link\">{{ item.title }}</a></h3>\n                            <!-- <p class=\"summary\">{{ item.summary }}</p> -->\n                            <span class=\"published_date\">{{ item.published_date }}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"footer-pagination\" style=\"margin: 50px 0 20px 0;position: absolute;left: 29%;\">\n                <el-pagination background layout=\"prev, pager, next\" :total=\"100\" :current-page.sync=\"currentPage\"\n                    @current-change=\"handlePaginationChange\" />\n            </div>\n\n            <!-- totalPages -->\n        </div>\n    </div>\n</template>\n<script >\nimport { API_NEWS, API_NEWS_KEY } from '../common/contants'\nimport dashboard from './Sidebar.vue'\nexport default {\n    name: 'admin.news',\n    components: {\n        dashboard,\n    },\n    data() {\n        return {\n            news: [],\n            search: '',\n            date_from: '',\n            date_to: '',\n            new_date_from: '',\n            new_date_to: '',\n            page: '',\n            sort_by: 'relevancy',\n            currentPage: 1,\n            totalPages: '',\n            rules: []\n        }\n    },\n    methods: {\n        async getAllNews() {\n\n            this.new_date_from = this.convertDateTime(this.date_from)\n            this.new_date_to = this.convertDateTime(this.date_to)\n            const url = API_NEWS + `search?q=${this.search}&from=${this.new_date_from}&to=${this.new_date_to}&lang=en&topic=all&sort_by=${this.sort_by}&page_size=9&page=${this.currentPage}`;\n            const options = {\n                method: 'GET',\n                headers: {\n                    'x-api-key': API_NEWS_KEY,\n                }\n            };\n            try {\n                const response = await fetch(url, options);\n                const rest = await response.json();\n                this.news = rest.articles\n                this.totalPages = Math.ceil(rest.total_pages / 9);\n            } catch (error) {\n                console.error(error);\n\n            }\n            console.log(this.currentPage);\n        },\n        convertDateTime(value) {\n            let dateObj = new Date(value);\n            let year = dateObj.getFullYear();\n            let month = (\"0\" + (dateObj.getMonth() + 1)).slice(-2);\n            let day = (\"0\" + dateObj.getDate()).slice(-2);\n            let formattedDate = `${year}/${month}/${day}`;\n            return formattedDate;\n        },\n        handlePaginationChange(newPage) {\n            this.currentPage = newPage;\n            this.getAllNews();\n        },\n    },\n    created() {\n        const rules = reactive < FormRules < RuleForm >> ({\n            name: [\n                { required: true, message: 'Please input Activity name', trigger: 'blur' },\n                { min: 3, max: 5, message: 'Length should be 3 to 5', trigger: 'blur' },\n            ],\n            region: [\n                {\n                    required: true,\n                    message: 'Please select Activity zone',\n                    trigger: 'change',\n                },\n            ],\n            count: [\n                {\n                    required: true,\n                    message: 'Please select Activity count',\n                    trigger: 'change',\n                },\n            ],\n            date1: [\n                {\n                    type: 'date',\n                    required: true,\n                    message: 'Please pick a date',\n                    trigger: 'change',\n                },\n            ],\n            date2: [\n                {\n                    type: 'date',\n                    required: true,\n                    message: 'Please pick a time',\n                    trigger: 'change',\n                },\n            ],\n            type: [\n                {\n                    type: 'array',\n                    required: true,\n                    message: 'Please select at least one activity type',\n                    trigger: 'change',\n                },\n            ],\n            resource: [\n                {\n                    required: true,\n                    message: 'Please select activity resource',\n                    trigger: 'change',\n                },\n            ],\n            desc: [\n                { required: true, message: 'Please input activity form', trigger: 'blur' },\n            ],\n        })\n    },\n}\n</script>\n<style scoped>\n.main-content {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: space-around;\n    gap: 10px;\n}\n\n.row {\n\n    width: 30%;\n}\n\n.news-item {\n    width: 100%;\n}\n\nimg {\n    width: 100%;\n    height: 200px;\n    cursor: pointer;\n}\n\n.title {\n    height: 60px;\n}\n\n.title a {\n    color: #000;\n    text-decoration: none;\n    background-color: transparent;\n    font-family: 'Times New Roman', Times, serif;\n}\n\n.published_date {\n    font-family: Georgia, 'Times New Roman', Times, serif;\n    font-size: 11px;\n    font-weight: 600;\n    color: white;\n    position: absolute;\n    right: 2.1%;\n    top: 68%;\n}\n\n.el-form-item {\n    display: flex;\n    --font-size: 14px;\n    margin-bottom: 18px;\n    /* float: left; */\n    align-items: baseline;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}