{"ast":null,"code":"import { API_PRODUCT } from '../common/contants';\nexport default {\n  name: \"ProductList\",\n  data() {\n    return {\n      products: [],\n      parentBorder: false,\n      searchKeyword: ''\n    };\n  },\n  created() {\n    this.getAllProduct();\n  },\n  methods: {\n    getAllProduct() {\n      this.$request.get(API_PRODUCT).then(result => {\n        this.products = result.data;\n      }).catch(err => {\n        alert(err);\n      });\n    },\n    onDelete(Productid) {\n      this.$swal.fire({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.$request.delete(API_PRODUCT + `/${Productid}`).then(result => {\n            if (result.data.success) {\n              this.getAllProduct();\n              this.$swal.fire('Deleted!', 'Your file has been deleted.', 'success');\n            }\n          }).catch(err => {\n            alert(err);\n          });\n        }\n      });\n    },\n    searchProduct() {\n      this.$request.get(API_PRODUCT + `/search/${this.searchKeyword}`).then(result => {\n        this.products = result.data;\n      }).catch(err => {\n        alert(err);\n      });\n    },\n    exportCSV() {\n      // Chuỗi CSV ban đầu với tiêu đề cột\n      let csvContent = \"data:text/csv;charset=utf-8,\" + \"Stt,Image,Name,Price,Description\\r\\n\";\n\n      // Lặp qua từng sản phẩm và thêm dữ liệu vào chuỗi CSV\n      this.products.forEach((product, index) => {\n        let row = [index, product.image, product.name, product.price + \" VND\", product.description];\n        csvContent += row.join(\",\") + \"\\r\\n\";\n      });\n\n      // Tạo URL dựa trên chuỗi CSV\n      let encodedUri = encodeURI(csvContent);\n\n      // Tạo phần tử a để tải xuống tệp tin CSV\n      let link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", \"products.csv\");\n      document.body.appendChild(link);\n\n      // Tự động kích hoạt sự kiện click để tải xuống\n      link.click();\n    }\n  }\n};","map":{"version":3,"names":["API_PRODUCT","name","data","products","parentBorder","searchKeyword","created","getAllProduct","methods","$request","get","then","result","catch","err","alert","onDelete","Productid","$swal","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","delete","success","searchProduct","exportCSV","csvContent","forEach","product","index","row","image","price","description","join","encodedUri","encodeURI","link","document","createElement","setAttribute","body","appendChild","click"],"sources":["/home/longdh@kaopiz.local/Music/vueMiniProject/miniproject/src/views/admin/products/List.vue"],"sourcesContent":["<template>\n    <div class=\"product-list mb-5\">\n        <div class=\"container\">\n            <div class=\" d-flex justify-content-beweent princing-header py-3 pt-md-3 pb-md-4 mx-auto text-center \">\n                <h2 class=\"display-4\">Product Management</h2>\n            </div>\n            <button @click=\"exportCSV\" class=\"btn btn-primary\">Export CSV</button>\n            <div class=\"d-flex justify-content-end mb-3\">\n                <input v-model=\"searchKeyword\" type=\"text\" placeholder=\"Search by name\" class=\"form-control\"\n                    style=\"width: 200px;\">\n                <button @click=\"searchProduct\" class=\"btn btn-primary\">Search</button>\n            </div>\n            <!-- <div class=\"product-items  table-wrapper-scroll-y my-custom-scrollbar mb-3 text-center \">\n                <table class=\"table table-fixed table-bordered table-striped mb-0\" width=\"100%\">\n                    <thead style=\"position: sticky; top: 0\">\n                        <tr>\n                            <th scope=\"col\">Stt</th>\n                            <th scope=\"col\">Image</th>\n                            <th scope=\"col\">Name</th>\n                            <th scope=\"col\">Price</th>\n                            <th scope=\"col\">Description</th>\n                            <th scope=\"col\">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody style=\"max-height: 200px; overflow-y: scroll\">\n                        <tr :key=\"index\" v-for=\"(product, index) in products\">\n                            <td scope=\"col\"> {{ index }}</td>\n                            <td><img :src=\"product.image\" style=\"width:60px\"></td>\n                            <td>{{ product.name }}</td>\n                            <td>{{ product.price }} VND</td>\n                            <td>{{ product.description }}</td>\n                            <td>\n                                <button class=\"btn btn-danger mx-1\" @click=\"onDelete(product.id)\">Delete</button>\n                                <router-link :to=\"{ name: 'product.update-product', params: { id: product.id } }\">\n                                    <button class=\"btn btn-success mx-1\">Edit</button>\n                                </router-link>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div> -->\n            <span>Border: <el-switch v-model=\"parentBorder\" /></span>\n            <el-table :data=\"products\" style=\"width: 100%\" height=\"530\" :border=\"parentBorder\">\n                <el-table-column fixed type=\"index\" label=\"STT\" width=\"60\" />\n                <el-table-column prop=\"image\" label=\"Image\" width=\"120\">\n                    <template #default=\"{ row }\">\n                        <img :src=\"row.image\" style=\"width:80px\">\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"name\" label=\"Name\" width=\"210\" />\n                <el-table-column prop=\"price\" label=\"Price\" width=\"150\" :sort-by=\"'price'\" :sortable=\"true\"\n                    :formatter=\"(row) => `${row.price} VND`\" :type=\"'number'\">\n                    <!-- <template #default=\"{ row }\">\n                        <span>{{ row.price }} VND</span>\n                    </template> -->\n                </el-table-column>\n                <el-table-column prop=\"description\" label=\"Description\" width=\"460\" />\n                <el-table-column label=\"Operations\" width=\"180\" prop=\"id\" fixed=\"right\">\n                    <template #default=\"{ row }\">\n                        <el-button type=\"danger\" size=\"big\" @click=\"onDelete(row.id)\"\n                            style=\"margin-right: 10px;\">Delete</el-button>\n                        <router-link :to=\"{ name: 'product.update-product', params: { id: row.id } }\">\n                            <el-button type=\"primary\" size=\"big\">Edit</el-button>\n                        </router-link>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"create-product\">\n                <router-link to=\"/admin/products/create-new\" class=\"text-white\" style=\"margin-top: 20px;\">\n                    <button class=\"btn btn-primary create-new float-right mt-3\">Create New</button>\n                </router-link>\n            </div>\n\n\n        </div>\n\n    </div>\n</template>\n<script>\nimport { API_PRODUCT } from '../common/contants'\nexport default {\n    name: \"ProductList\",\n    data() {\n        return {\n            products: [],\n            parentBorder: false,\n            searchKeyword: ''\n        }\n    },\n    created() {\n        this.getAllProduct()\n\n    },\n    methods: {\n        getAllProduct() {\n            this.$request.get(API_PRODUCT).then((result) => {\n                this.products = result.data\n            }).catch((err) => {\n                alert(err)\n            });\n        },\n        onDelete(Productid) {\n            this.$swal.fire({\n                title: 'Are you sure?',\n                text: \"You won't be able to revert this!\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: 'Yes, delete it!'\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    this.$request.delete(API_PRODUCT + `/${Productid}`).then((result) => {\n                        if (result.data.success) {\n                            this.getAllProduct()\n                            this.$swal.fire(\n                                'Deleted!',\n                                'Your file has been deleted.',\n                                'success'\n                            )\n                        }\n                    }).catch((err) => {\n                        alert(err)\n                    });\n\n                }\n            })\n        },\n        searchProduct() {\n            this.$request.get(API_PRODUCT + `/search/${this.searchKeyword}`)\n                .then((result) => {\n                    this.products = result.data;\n                })\n                .catch((err) => {\n                    alert(err);\n                });\n        },\n        exportCSV() {\n            // Chuỗi CSV ban đầu với tiêu đề cột\n            let csvContent = \"data:text/csv;charset=utf-8,\"\n                + \"Stt,Image,Name,Price,Description\\r\\n\";\n\n            // Lặp qua từng sản phẩm và thêm dữ liệu vào chuỗi CSV\n            this.products.forEach((product, index) => {\n                let row = [\n                    index,\n                    product.image,\n                    product.name,\n                    product.price + \" VND\",\n                    product.description\n                ];\n                csvContent += row.join(\",\") + \"\\r\\n\";\n            });\n\n            // Tạo URL dựa trên chuỗi CSV\n            let encodedUri = encodeURI(csvContent);\n\n            // Tạo phần tử a để tải xuống tệp tin CSV\n            let link = document.createElement(\"a\");\n            link.setAttribute(\"href\", encodedUri);\n            link.setAttribute(\"download\", \"products.csv\");\n            document.body.appendChild(link);\n\n            // Tự động kích hoạt sự kiện click để tải xuống\n            link.click();\n        }\n    },\n}\n</script>\n\n\n\n"],"mappings":"AA+EA,SAASA,WAAU,QAAS,oBAAmB;AAC/C,eAAe;EACXC,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE,KAAK;MACnBC,aAAa,EAAE;IACnB;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,aAAa,CAAC;EAEvB,CAAC;EACDC,OAAO,EAAE;IACLD,aAAaA,CAAA,EAAG;MACZ,IAAI,CAACE,QAAQ,CAACC,GAAG,CAACV,WAAW,CAAC,CAACW,IAAI,CAAEC,MAAM,IAAK;QAC5C,IAAI,CAACT,QAAO,GAAIS,MAAM,CAACV,IAAG;MAC9B,CAAC,CAAC,CAACW,KAAK,CAAEC,GAAG,IAAK;QACdC,KAAK,CAACD,GAAG;MACb,CAAC,CAAC;IACN,CAAC;IACDE,QAAQA,CAACC,SAAS,EAAE;MAChB,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC;QACZC,KAAK,EAAE,eAAe;QACtBC,IAAI,EAAE,mCAAmC;QACzCC,IAAI,EAAE,SAAS;QACfC,gBAAgB,EAAE,IAAI;QACtBC,kBAAkB,EAAE,SAAS;QAC7BC,iBAAiB,EAAE,MAAM;QACzBC,iBAAiB,EAAE;MACvB,CAAC,CAAC,CAACf,IAAI,CAAEC,MAAM,IAAK;QAChB,IAAIA,MAAM,CAACe,WAAW,EAAE;UACpB,IAAI,CAAClB,QAAQ,CAACmB,MAAM,CAAC5B,WAAU,GAAK,IAAGiB,SAAU,EAAC,CAAC,CAACN,IAAI,CAAEC,MAAM,IAAK;YACjE,IAAIA,MAAM,CAACV,IAAI,CAAC2B,OAAO,EAAE;cACrB,IAAI,CAACtB,aAAa,CAAC;cACnB,IAAI,CAACW,KAAK,CAACC,IAAI,CACX,UAAU,EACV,6BAA6B,EAC7B,SACJ;YACJ;UACJ,CAAC,CAAC,CAACN,KAAK,CAAEC,GAAG,IAAK;YACdC,KAAK,CAACD,GAAG;UACb,CAAC,CAAC;QAEN;MACJ,CAAC;IACL,CAAC;IACDgB,aAAaA,CAAA,EAAG;MACZ,IAAI,CAACrB,QAAQ,CAACC,GAAG,CAACV,WAAU,GAAK,WAAU,IAAI,CAACK,aAAc,EAAC,EAC1DM,IAAI,CAAEC,MAAM,IAAK;QACd,IAAI,CAACT,QAAO,GAAIS,MAAM,CAACV,IAAI;MAC/B,CAAC,EACAW,KAAK,CAAEC,GAAG,IAAK;QACZC,KAAK,CAACD,GAAG,CAAC;MACd,CAAC,CAAC;IACV,CAAC;IACDiB,SAASA,CAAA,EAAG;MACR;MACA,IAAIC,UAAS,GAAI,8BAA6B,GACxC,sCAAsC;;MAE5C;MACA,IAAI,CAAC7B,QAAQ,CAAC8B,OAAO,CAAC,CAACC,OAAO,EAAEC,KAAK,KAAK;QACtC,IAAIC,GAAE,GAAI,CACND,KAAK,EACLD,OAAO,CAACG,KAAK,EACbH,OAAO,CAACjC,IAAI,EACZiC,OAAO,CAACI,KAAI,GAAI,MAAM,EACtBJ,OAAO,CAACK,WAAU,CACrB;QACDP,UAAS,IAAKI,GAAG,CAACI,IAAI,CAAC,GAAG,IAAI,MAAM;MACxC,CAAC,CAAC;;MAEF;MACA,IAAIC,UAAS,GAAIC,SAAS,CAACV,UAAU,CAAC;;MAEtC;MACA,IAAIW,IAAG,GAAIC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACtCF,IAAI,CAACG,YAAY,CAAC,MAAM,EAAEL,UAAU,CAAC;MACrCE,IAAI,CAACG,YAAY,CAAC,UAAU,EAAE,cAAc,CAAC;MAC7CF,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,IAAI,CAAC;;MAE/B;MACAA,IAAI,CAACM,KAAK,CAAC,CAAC;IAChB;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}