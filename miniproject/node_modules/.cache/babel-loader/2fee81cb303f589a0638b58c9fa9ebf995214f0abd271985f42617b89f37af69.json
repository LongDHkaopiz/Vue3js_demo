{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"product-list mb-5\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"d-flex justify-content-beweent princing-header py-3 pt-md-3 pb-md-4 mx-auto text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"display-4\"\n}, \"Product Management\")], -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"d-flex justify-content-end mb-3\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"create-product\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-primary create-new float-right mt-3\"\n}, \"Create New\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_switch = _resolveComponent(\"el-switch\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.exportCSV && $options.exportCSV(...args)),\n    class: \"btn btn-primary\"\n  }, \"Export CSV\"), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchKeyword = $event),\n    type: \"text\",\n    placeholder: \"Search by name\",\n    class: \"form-control\",\n    style: {\n      \"width\": \"200px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchKeyword]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.searchProduct && $options.searchProduct(...args)),\n    class: \"btn btn-primary\"\n  }, \"Search\")]), _createCommentVNode(\" <div class=\\\"product-items  table-wrapper-scroll-y my-custom-scrollbar mb-3 text-center \\\">\\n                <table class=\\\"table table-fixed table-bordered table-striped mb-0\\\" width=\\\"100%\\\">\\n                    <thead style=\\\"position: sticky; top: 0\\\">\\n                        <tr>\\n                            <th scope=\\\"col\\\">Stt</th>\\n                            <th scope=\\\"col\\\">Image</th>\\n                            <th scope=\\\"col\\\">Name</th>\\n                            <th scope=\\\"col\\\">Price</th>\\n                            <th scope=\\\"col\\\">Description</th>\\n                            <th scope=\\\"col\\\">Action</th>\\n                        </tr>\\n                    </thead>\\n                    <tbody style=\\\"max-height: 200px; overflow-y: scroll\\\">\\n                        <tr :key=\\\"index\\\" v-for=\\\"(product, index) in products\\\">\\n                            <td scope=\\\"col\\\"> {{ index }}</td>\\n                            <td><img :src=\\\"product.image\\\" style=\\\"width:60px\\\"></td>\\n                            <td>{{ product.name }}</td>\\n                            <td>{{ product.price }} VND</td>\\n                            <td>{{ product.description }}</td>\\n                            <td>\\n                                <button class=\\\"btn btn-danger mx-1\\\" @click=\\\"onDelete(product.id)\\\">Delete</button>\\n                                <router-link :to=\\\"{ name: 'product.update-product', params: { id: product.id } }\\\">\\n                                    <button class=\\\"btn btn-success mx-1\\\">Edit</button>\\n                                </router-link>\\n                            </td>\\n                        </tr>\\n                    </tbody>\\n                </table>\\n            </div> \"), _createElementVNode(\"span\", null, [_createTextVNode(\"Border: \"), _createVNode(_component_el_switch, {\n    modelValue: $data.parentBorder,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.parentBorder = $event)\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createVNode(_component_el_table, {\n    data: $data.products,\n    style: {\n      \"width\": \"100%\"\n    },\n    height: \"530\",\n    border: $data.parentBorder\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      fixed: \"\",\n      type: \"index\",\n      label: \"STT\",\n      width: \"60\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"image\",\n      label: \"Image\",\n      width: \"120\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createElementVNode(\"img\", {\n        src: row.image,\n        style: {\n          \"width\": \"80px\"\n        }\n      }, null, 8 /* PROPS */, _hoisted_5)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"Name\",\n      width: \"210\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"price\",\n      label: \"Price\",\n      width: \"150\",\n      \"sort-by\": 'price',\n      sortable: true,\n      formatter: row => `${row.price} VND`,\n      type: 'number'\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" <template #default=\\\"{ row }\\\">\\n                        <span>{{ row.price }} VND</span>\\n                    </template> \")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"formatter\"]), _createVNode(_component_el_table_column, {\n      prop: \"description\",\n      label: \"Description\",\n      width: \"460\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"Operations\",\n      width: \"180\",\n      prop: \"id\",\n      fixed: \"right\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_button, {\n        type: \"danger\",\n        size: \"big\",\n        onClick: $event => $options.onDelete(row.id),\n        style: {\n          \"margin-right\": \"10px\"\n        }\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Delete\")]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_router_link, {\n        to: {\n          name: 'product.update-product',\n          params: {\n            id: row.id\n          }\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"big\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Edit\")]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\", \"border\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_router_link, {\n    to: \"/admin/products/create-new\",\n    class: \"text-white\",\n    style: {\n      \"margin-top\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => [_hoisted_7]),\n    _: 1 /* STABLE */\n  })])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","args","$options","exportCSV","_hoisted_4","$data","searchKeyword","$event","type","placeholder","style","searchProduct","_createCommentVNode","_createVNode","_component_el_switch","parentBorder","_component_el_table","data","products","height","border","_component_el_table_column","fixed","label","width","prop","default","_withCtx","row","src","image","sortable","formatter","price","_component_el_button","size","onDelete","id","_component_router_link","to","name","params","_hoisted_6","_hoisted_7"],"sources":["/home/longdh@kaopiz.local/Music/vueMiniProject/miniproject/src/views/admin/products/List.vue"],"sourcesContent":["<template>\n    <div class=\"product-list mb-5\">\n        <div class=\"container\">\n            <div class=\" d-flex justify-content-beweent princing-header py-3 pt-md-3 pb-md-4 mx-auto text-center \">\n                <h2 class=\"display-4\">Product Management</h2>\n            </div>\n            <button @click=\"exportCSV\" class=\"btn btn-primary\">Export CSV</button>\n            <div class=\"d-flex justify-content-end mb-3\">\n                <input v-model=\"searchKeyword\" type=\"text\" placeholder=\"Search by name\" class=\"form-control\"\n                    style=\"width: 200px;\">\n                <button @click=\"searchProduct\" class=\"btn btn-primary\">Search</button>\n            </div>\n            <!-- <div class=\"product-items  table-wrapper-scroll-y my-custom-scrollbar mb-3 text-center \">\n                <table class=\"table table-fixed table-bordered table-striped mb-0\" width=\"100%\">\n                    <thead style=\"position: sticky; top: 0\">\n                        <tr>\n                            <th scope=\"col\">Stt</th>\n                            <th scope=\"col\">Image</th>\n                            <th scope=\"col\">Name</th>\n                            <th scope=\"col\">Price</th>\n                            <th scope=\"col\">Description</th>\n                            <th scope=\"col\">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody style=\"max-height: 200px; overflow-y: scroll\">\n                        <tr :key=\"index\" v-for=\"(product, index) in products\">\n                            <td scope=\"col\"> {{ index }}</td>\n                            <td><img :src=\"product.image\" style=\"width:60px\"></td>\n                            <td>{{ product.name }}</td>\n                            <td>{{ product.price }} VND</td>\n                            <td>{{ product.description }}</td>\n                            <td>\n                                <button class=\"btn btn-danger mx-1\" @click=\"onDelete(product.id)\">Delete</button>\n                                <router-link :to=\"{ name: 'product.update-product', params: { id: product.id } }\">\n                                    <button class=\"btn btn-success mx-1\">Edit</button>\n                                </router-link>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div> -->\n            <span>Border: <el-switch v-model=\"parentBorder\" /></span>\n            <el-table :data=\"products\" style=\"width: 100%\" height=\"530\" :border=\"parentBorder\">\n                <el-table-column fixed type=\"index\" label=\"STT\" width=\"60\" />\n                <el-table-column prop=\"image\" label=\"Image\" width=\"120\">\n                    <template #default=\"{ row }\">\n                        <img :src=\"row.image\" style=\"width:80px\">\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"name\" label=\"Name\" width=\"210\" />\n                <el-table-column prop=\"price\" label=\"Price\" width=\"150\" :sort-by=\"'price'\" :sortable=\"true\"\n                    :formatter=\"(row) => `${row.price} VND`\" :type=\"'number'\">\n                    <!-- <template #default=\"{ row }\">\n                        <span>{{ row.price }} VND</span>\n                    </template> -->\n                </el-table-column>\n                <el-table-column prop=\"description\" label=\"Description\" width=\"460\" />\n                <el-table-column label=\"Operations\" width=\"180\" prop=\"id\" fixed=\"right\">\n                    <template #default=\"{ row }\">\n                        <el-button type=\"danger\" size=\"big\" @click=\"onDelete(row.id)\"\n                            style=\"margin-right: 10px;\">Delete</el-button>\n                        <router-link :to=\"{ name: 'product.update-product', params: { id: row.id } }\">\n                            <el-button type=\"primary\" size=\"big\">Edit</el-button>\n                        </router-link>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"create-product\">\n                <router-link to=\"/admin/products/create-new\" class=\"text-white\" style=\"margin-top: 20px;\">\n                    <button class=\"btn btn-primary create-new float-right mt-3\">Create New</button>\n                </router-link>\n            </div>\n\n\n        </div>\n\n    </div>\n</template>\n<script>\nimport { API_PRODUCT } from '../common/contants'\nexport default {\n    name: \"ProductList\",\n    data() {\n        return {\n            products: [],\n            parentBorder: false,\n            searchKeyword: ''\n        }\n    },\n    created() {\n        this.getAllProduct()\n\n    },\n    methods: {\n        getAllProduct() {\n            this.$request.get(API_PRODUCT).then((result) => {\n                this.products = result.data\n            }).catch((err) => {\n                alert(err)\n            });\n        },\n        onDelete(Productid) {\n            this.$swal.fire({\n                title: 'Are you sure?',\n                text: \"You won't be able to revert this!\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: 'Yes, delete it!'\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    this.$request.delete(API_PRODUCT + `/${Productid}`).then((result) => {\n                        if (result.data.success) {\n                            this.getAllProduct()\n                            this.$swal.fire(\n                                'Deleted!',\n                                'Your file has been deleted.',\n                                'success'\n                            )\n                        }\n                    }).catch((err) => {\n                        alert(err)\n                    });\n\n                }\n            })\n        },\n        searchProduct() {\n            this.$request.get(API_PRODUCT + `/search/${this.searchKeyword}`)\n                .then((result) => {\n                    this.products = result.data;\n                })\n                .catch((err) => {\n                    alert(err);\n                });\n        },\n        exportCSV() {\n            // Original CSV string with column headers\n            let csvContent = \"data:text/csv;charset=utf-8,\"\n                + \"Stt,Id,Image,Name,Price,Description\\r\\n\";\n\n            // Loop through each product and add the data to the CSV series\n            this.products.forEach((product, index) => {\n                // const currentDate = new Date();\n                // var dateTimeString = currentDate.toISOString().replace(/[-:.]/g, '');\n                let row = [\n                    index,\n                    product.id,\n                    product.image,\n                    product.name,\n                    product.price,\n                    product.description\n                ];\n                csvContent += row.map(value => `\"${value}\"`).join(\",\") + \"\\r\\n\";\n            });\n            // const filename = `AllProducts-${dateTimeString}.csv`;\n            // Generate a URL based on a CSV string\n            let encodedUri = encodeURI(csvContent);\n\n            // Create element a to download CSV file\n            let link = document.createElement(\"a\");\n            link.setAttribute(\"href\", encodedUri);\n            link.setAttribute(\"download\", \"products.csv\");\n            document.body.appendChild(link);\n\n            // Automatically trigger click to download event\n            link.click();\n        }\n    },\n}\n</script>\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}